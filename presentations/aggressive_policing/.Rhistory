panel.spacing.y=unit(1, "lines"),
plot.caption = element_text(hjust = 0, colour = "#3C3C3C", margin = unit(c(0,0,0,0), "mm"), size = 8),
plot.margin = margin(.5, 0, .5, 0, "cm"),
plot.background  = element_rect(fill = NA, colour = NA),
panel.background = element_rect(fill = NA, colour = NA),
axis.line = element_line(colour = "#3C3C3C", linewidth = 0.3),
legend.background = element_rect(fill = NA, colour = NA),
legend.key        = element_rect(fill = NA, colour = NA)) +
scale_x_discrete(labels = c('Neighborhood\nexposure to\npolice use of force')) +
scale_colour_brewer(palette = "Set1",
breaks = c('white', 'black', 'latino'),
labels = c('White', 'Black', 'Latino')) +
theme(aspect.ratio = .25)
plot.consequences
plot.consequences <-
ggplot(dataplot, aes(y = estimate, x = term, group = effect, colour = effect)) +
geom_errorbar(aes(ymin = ci.low, ymax = ci.upp, alpha = significance), width = .25, position = position_dodge(width = .4), lwd = .5, show.legend = T) +
geom_point(aes(shape = significance, group = effect, alpha = significance),
size = 3,
position = position_dodge(width = .4)) +
scale_alpha_manual(values = c(.5, 1)) +
scale_shape_manual(values = c(NA, 8), labels = c("", "95% confidence interval\ndoes not cross zero")) +
geom_hline(yintercept = 0, size = .35, linetype = "dashed", color = 'darkgray') +
facet_grid(~ outcome) +
coord_flip() +
#ggtitle("Effects of neighborhood exposure to police use-of-force\n(2012--2015) on police victimization (2021)") +
ylab("") + xlab("") +
guides(colour = guide_legend(title = ""),
alpha = "none",
shape = guide_legend(title = "",
override.aes = list(linetype = c(0,1),
shape = c(NA,8),
size = c(0,3)))) +
theme(text = element_text(family = "ebgaramond"),
plot.title = element_text(hjust = .5, vjust = 2, colour = "#3C3C3C", size = 12),
axis.text.y = element_text(colour = "#3C3C3C", size = 10),
axis.text.x = element_text(colour = "#3C3C3C", size = 6),
panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
strip.background = element_blank(),
legend.text = element_text(colour = "#3C3C3C", size = 10),
strip.text.x = element_text(size = 10),
#panel.spacing.x=unit(1, "lines"),
#panel.spacing.y=unit(1, "lines"),
#plot.caption = element_text(hjust = 0, colour = "#3C3C3C", margin = unit(c(0,0,0,0), "mm"), size = 8),
plot.margin = margin(.5, 0, .5, 0, "cm"),
plot.background  = element_rect(fill = NA, colour = NA),
panel.background = element_rect(fill = NA, colour = NA),
axis.line = element_line(colour = "#3C3C3C", linewidth = 0.3),
legend.background = element_rect(fill = NA, colour = NA),
legend.key        = element_rect(fill = NA, colour = NA)) +
scale_x_discrete(labels = c('Neighborhood\nexposure to\npolice use of force')) +
scale_colour_brewer(palette = "Set1",
breaks = c('white', 'black', 'latino'),
labels = c('White', 'Black', 'Latino')) +
theme(aspect.ratio = .25)
plot.consequences
ggplot(dataplot, aes(y = estimate, x = term, group = effect, colour = effect)) +
geom_errorbar(aes(ymin = ci.low, ymax = ci.upp, alpha = significance), width = .25, position = position_dodge(width = .4), lwd = .5, show.legend = T) +
geom_point(aes(shape = significance, group = effect, alpha = significance),
size = 3,
position = position_dodge(width = .4)) +
scale_alpha_manual(values = c(.5, 1)) +
scale_shape_manual(values = c(NA, 8), labels = c("", "95% confidence interval\ndoes not cross zero")) +
geom_hline(yintercept = 0, size = .35, linetype = "dashed", color = 'darkgray') +
facet_grid(~ outcome) +
coord_flip() +
#ggtitle("Effects of neighborhood exposure to police use-of-force\n(2012--2015) on police victimization (2021)") +
ylab("") + xlab("") +
guides(colour = guide_legend(title = ""),
alpha = "none",
shape = guide_legend(title = "",
override.aes = list(linetype = c(0,1),
shape = c(NA,8),
size = c(0,3))))
plot.consequences <-
ggplot(dataplot, aes(y = estimate, x = term, group = effect, colour = effect)) +
geom_errorbar(aes(ymin = ci.low, ymax = ci.upp, alpha = significance), width = .25, position = position_dodge(width = .4), lwd = .5, show.legend = T) +
geom_point(aes(shape = significance, group = effect, alpha = significance),
size = 3,
position = position_dodge(width = .4)) +
scale_alpha_manual(values = c(.5, 1)) +
scale_shape_manual(values = c(NA, 8), labels = c("", "95% confidence interval\ndoes not cross zero")) +
geom_hline(yintercept = 0, size = .35, linetype = "dashed", color = 'darkgray') +
facet_grid(~ outcome) +
coord_flip() +
#ggtitle("Effects of neighborhood exposure to police use-of-force\n(2012--2015) on police victimization (2021)") +
ylab("") + xlab("") +
guides(colour = guide_legend(title = ""),
alpha = "none",
shape = guide_legend(title = "",
override.aes = list(linetype = c(0,1),
shape = c(NA,8),
size = c(0,3)))) +
theme(text = element_text(family = "ebgaramond"),
plot.title = element_text(hjust = .5, vjust = 2, colour = "#3C3C3C", size = 12),
axis.text.y = element_text(colour = "#3C3C3C", size = 10),
axis.text.x = element_text(colour = "#3C3C3C", size = 6),
panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
strip.background = element_blank(),
legend.text = element_text(colour = "#3C3C3C", size = 10),
strip.text.x = element_text(size = 10),
#panel.spacing.x=unit(1, "lines"),
#panel.spacing.y=unit(1, "lines"),
#plot.caption = element_text(hjust = 0, colour = "#3C3C3C", margin = unit(c(0,0,0,0), "mm"), size = 8),
#plot.margin = margin(.5, 0, .5, 0, "cm"),
plot.background  = element_rect(fill = NA, colour = NA),
panel.background = element_rect(fill = NA, colour = NA),
axis.line = element_line(colour = "#3C3C3C", linewidth = 0.3),
legend.background = element_rect(fill = NA, colour = NA),
legend.key        = element_rect(fill = NA, colour = NA)) +
scale_x_discrete(labels = c('Neighborhood\nexposure to\npolice use of force')) +
scale_colour_brewer(palette = "Set1",
breaks = c('white', 'black', 'latino'),
labels = c('White', 'Black', 'Latino')) +
theme(aspect.ratio = .25)
plot.consequences
plot.consequences <-
ggplot(dataplot, aes(y = estimate, x = term, group = effect, colour = effect)) +
geom_errorbar(aes(ymin = ci.low, ymax = ci.upp, alpha = significance), width = .25, position = position_dodge(width = .4), lwd = .5, show.legend = T) +
geom_point(aes(shape = significance, group = effect, alpha = significance),
size = 3,
position = position_dodge(width = .4)) +
scale_alpha_manual(values = c(.5, 1)) +
scale_shape_manual(values = c(NA, 8), labels = c("", "95% confidence interval\ndoes not cross zero")) +
geom_hline(yintercept = 0, size = .35, linetype = "dashed", color = 'darkgray') +
facet_grid(~ outcome) +
coord_flip() +
#ggtitle("Effects of neighborhood exposure to police use-of-force\n(2012--2015) on police victimization (2021)") +
ylab("") + xlab("") +
guides(colour = guide_legend(title = ""),
alpha = "none",
shape = guide_legend(title = "",
override.aes = list(linetype = c(0,1),
shape = c(NA,8),
size = c(0,3)))) +
theme(text = element_text(family = "ebgaramond"),
plot.title = element_text(hjust = .5, vjust = 2, colour = "#3C3C3C", size = 12),
axis.text.y = element_text(colour = "#3C3C3C", size = 10),
axis.text.x = element_text(colour = "#3C3C3C", size = 6),
panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
strip.background = element_blank(),
legend.text = element_text(colour = "#3C3C3C", size = 10),
strip.text.x = element_text(size = 10),
#panel.spacing.x=unit(1, "lines"),
#panel.spacing.y=unit(1, "lines"),
#plot.caption = element_text(hjust = 0, colour = "#3C3C3C", margin = unit(c(0,0,0,0), "mm"), size = 8),
#plot.margin = margin(.5, 0, .5, 0, "cm"),
plot.background  = element_rect(fill = NA, colour = NA),
panel.background = element_rect(fill = NA, colour = NA),
axis.line = element_line(colour = "#3C3C3C", linewidth = 0.3),
legend.background = element_rect(fill = NA, colour = NA),
legend.key        = element_rect(fill = NA, colour = NA)) +
scale_x_discrete(labels = c('Neighborhood\nexposure to\npolice use of force')) +
scale_colour_brewer(palette = "Set1",
breaks = c('white', 'black', 'latino'),
labels = c('White', 'Black', 'Latino')) +
theme(aspect.ratio = 1)
plot.consequences
ggplot(dataplot, aes(y = estimate, x = term, group = effect, colour = effect)) +
geom_errorbar(aes(ymin = ci.low, ymax = ci.upp, alpha = significance), width = .25, position = position_dodge(width = .4), lwd = .5, show.legend = T) +
geom_point(aes(shape = significance, group = effect, alpha = significance),
size = 3,
position = position_dodge(width = .4)) +
scale_alpha_manual(values = c(.5, 1)) +
scale_shape_manual(values = c(NA, 8), labels = c("", "95% confidence interval\ndoes not cross zero")) +
geom_hline(yintercept = 0, size = .35, linetype = "dashed", color = 'darkgray') +
facet_grid(~ outcome) +
coord_flip() +
#ggtitle("Effects of neighborhood exposure to police use-of-force\n(2012--2015) on police victimization (2021)") +
ylab("") + xlab("") +
guides(colour = guide_legend(title = ""),
alpha = "none",
shape = guide_legend(title = "",
override.aes = list(linetype = c(0,1),
shape = c(NA,8),
size = c(0,3)))) +
theme(text = element_text(family = "ebgaramond"),
plot.title = element_text(hjust = .5, vjust = 2, colour = "#3C3C3C", size = 12),
axis.text.y = element_text(colour = "#3C3C3C", size = 10),
axis.text.x = element_text(colour = "#3C3C3C", size = 6),
panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
strip.background = element_blank(),
legend.text = element_text(colour = "#3C3C3C", size = 10),
strip.text.x = element_text(size = 10),
#panel.spacing.x=unit(1, "lines"),
#panel.spacing.y=unit(1, "lines"),
#plot.caption = element_text(hjust = 0, colour = "#3C3C3C", margin = unit(c(0,0,0,0), "mm"), size = 8),
#plot.margin = margin(.5, 0, .5, 0, "cm"),
plot.background  = element_rect(fill = NA, colour = NA),
panel.background = element_rect(fill = NA, colour = NA),
axis.line = element_line(colour = "#3C3C3C", linewidth = 0.3),
legend.background = element_rect(fill = NA, colour = NA),
legend.key        = element_rect(fill = NA, colour = NA)) +
scale_x_discrete(labels = c('Neighborhood\nexposure to\npolice use of force')) +
scale_colour_brewer(palette = "Set1",
breaks = c('white', 'black', 'latino'),
labels = c('White', 'Black', 'Latino'))
plot.consequences <-
ggplot(dataplot, aes(y = estimate, x = term, group = effect, colour = effect)) +
geom_errorbar(aes(ymin = ci.low, ymax = ci.upp, alpha = significance), width = .25, position = position_dodge(width = .4), lwd = .5, show.legend = T) +
geom_point(aes(shape = significance, group = effect, alpha = significance),
size = 3,
position = position_dodge(width = .4)) +
scale_alpha_manual(values = c(.5, 1)) +
scale_shape_manual(values = c(NA, 8), labels = c("", "95% confidence interval\ndoes not cross zero")) +
geom_hline(yintercept = 0, size = .35, linetype = "dashed", color = 'darkgray') +
facet_grid(~ outcome) +
coord_flip() +
#ggtitle("Effects of neighborhood exposure to police use-of-force\n(2012--2015) on police victimization (2021)") +
ylab("") + xlab("") +
guides(colour = guide_legend(title = ""),
alpha = "none",
shape = guide_legend(title = "",
override.aes = list(linetype = c(0,1),
shape = c(NA,8),
size = c(0,3)))) +
theme(text = element_text(family = "ebgaramond"),
plot.title = element_text(hjust = .5, vjust = 2, colour = "#3C3C3C", size = 12),
axis.text.y = element_text(colour = "#3C3C3C", size = 10),
axis.text.x = element_text(colour = "#3C3C3C", size = 6),
panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
strip.background = element_blank(),
legend.text = element_text(colour = "#3C3C3C", size = 10),
strip.text.x = element_text(size = 10),
#panel.spacing.x=unit(1, "lines"),
#panel.spacing.y=unit(1, "lines"),
#plot.caption = element_text(hjust = 0, colour = "#3C3C3C", margin = unit(c(0,0,0,0), "mm"), size = 8),
#plot.margin = margin(.5, 0, .5, 0, "cm"),
plot.background  = element_rect(fill = NA, colour = NA),
panel.background = element_rect(fill = NA, colour = NA),
axis.line = element_line(colour = "#3C3C3C", linewidth = 0.3),
legend.background = element_rect(fill = NA, colour = NA),
legend.key        = element_rect(fill = NA, colour = NA)) +
scale_x_discrete(labels = c('Neighborhood\nexposure to\npolice use of force')) +
scale_colour_brewer(palette = "Set1",
breaks = c('white', 'black', 'latino'),
labels = c('White', 'Black', 'Latino')) #+
ggsave("esc/presentation_files/plot_vict.svg", plot = plot.consequences, bg = "transparent")
plot.consequences <-
ggplot(dataplot, aes(y = estimate, x = term, group = effect, colour = effect)) +
geom_errorbar(aes(ymin = ci.low, ymax = ci.upp, alpha = significance), width = .25, position = position_dodge(width = .4), lwd = .5, show.legend = T) +
geom_point(aes(shape = significance, group = effect, alpha = significance),
size = 3,
position = position_dodge(width = .4)) +
scale_alpha_manual(values = c(.5, 1)) +
scale_shape_manual(values = c(NA, 8), labels = c("", "95% confidence interval\ndoes not cross zero")) +
geom_hline(yintercept = 0, size = .35, linetype = "dashed", color = 'darkgray') +
facet_grid(~ outcome) +
coord_flip() +
#ggtitle("Effects of neighborhood exposure to police use-of-force\n(2012--2015) on police victimization (2021)") +
ylab("") + xlab("") +
guides(colour = guide_legend(title = ""),
alpha = "none",
shape = guide_legend(title = "",
override.aes = list(linetype = c(0,1),
shape = c(NA,8),
size = c(0,3)))) +
theme(text = element_text(family = "ebgaramond"),
plot.title = element_text(hjust = .5, vjust = 2, colour = "#3C3C3C", size = 12),
axis.text.y = element_text(colour = "#3C3C3C", size = 10),
axis.text.x = element_text(colour = "#3C3C3C", size = 6),
panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
strip.background = element_blank(),
legend.text = element_text(colour = "#3C3C3C", size = 10),
strip.text.x = element_text(size = 10),
#panel.spacing.x=unit(1, "lines"),
#panel.spacing.y=unit(1, "lines"),
#plot.caption = element_text(hjust = 0, colour = "#3C3C3C", margin = unit(c(0,0,0,0), "mm"), size = 8),
#plot.margin = margin(.5, 0, .5, 0, "cm"),
plot.background  = element_rect(fill = NA, colour = NA),
panel.background = element_rect(fill = NA, colour = NA),
axis.line = element_line(colour = "#3C3C3C", linewidth = 0.3),
legend.background = element_rect(fill = NA, colour = NA),
legend.key        = element_rect(fill = NA, colour = NA)) +
scale_x_discrete(labels = c('Neighborhood\nexposure to\npolice use of force')) +
scale_colour_brewer(palette = "Set1",
breaks = c('white', 'black', 'latino'),
labels = c('White', 'Black', 'Latino')) +
theme(aspect.ratio = 1)
ggsave("esc/presentation_files/plot_vict.svg", plot = plot.consequences, bg = "transparent")
ggsave("esc/presentation_files/plot_vict.svg", plot = plot.consequences, bg = "transparent", width = 10, height = 6, units = "in")
plot.consequences <-
ggplot(dataplot, aes(y = estimate, x = term, group = effect, colour = effect)) +
geom_errorbar(aes(ymin = ci.low, ymax = ci.upp, alpha = significance), width = .25, position = position_dodge(width = .4), lwd = .5, show.legend = T) +
geom_point(aes(shape = significance, group = effect, alpha = significance),
size = 3,
position = position_dodge(width = .4)) +
scale_alpha_manual(values = c(.5, 1)) +
scale_shape_manual(values = c(NA, 8), labels = c("", "95% confidence interval\ndoes not cross zero")) +
geom_hline(yintercept = 0, size = .35, linetype = "dashed", color = 'darkgray') +
facet_grid(~ outcome) +
coord_flip() +
#ggtitle("Effects of neighborhood exposure to police use-of-force\n(2012--2015) on police victimization (2021)") +
ylab("") + xlab("") +
guides(colour = guide_legend(title = ""),
alpha = "none",
shape = guide_legend(title = "",
override.aes = list(linetype = c(0,1),
shape = c(NA,8),
size = c(0,3)))) +
theme(text = element_text(family = "ebgaramond"),
plot.title = element_text(hjust = .5, vjust = 2, colour = "#3C3C3C", size = 12),
axis.text.y = element_text(colour = "#3C3C3C", size = 12),
axis.text.x = element_text(colour = "#3C3C3C", size = 6),
panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
strip.background = element_blank(),
legend.text = element_text(colour = "#3C3C3C", size = 12),
strip.text.x = element_text(size = 12),
#panel.spacing.x=unit(1, "lines"),
#panel.spacing.y=unit(1, "lines"),
#plot.caption = element_text(hjust = 0, colour = "#3C3C3C", margin = unit(c(0,0,0,0), "mm"), size = 8),
#plot.margin = margin(.5, 0, .5, 0, "cm"),
plot.background  = element_rect(fill = NA, colour = NA),
panel.background = element_rect(fill = NA, colour = NA),
axis.line = element_line(colour = "#3C3C3C", linewidth = 0.3),
legend.background = element_rect(fill = NA, colour = NA),
legend.key        = element_rect(fill = NA, colour = NA)) +
scale_x_discrete(labels = c('Neighborhood\nexposure to\npolice use of force')) +
scale_colour_brewer(palette = "Set1",
breaks = c('white', 'black', 'latino'),
labels = c('White', 'Black', 'Latino')) +
theme(aspect.ratio = 1)
ggsave("esc/presentation_files/plot_vict.svg", plot = plot.consequences, bg = "transparent", width = 10, height = 6, units = "in")
load("data/export/dataplot_spatial.RData")
dataplot_spatial %>%
filter(model == "trr")
plot_trr <-
ggplot(dataplot_spatial %>%
filter(model == "trr") %>%
filter(term %in% c("log(sqf)", "log(crime)"))
, aes(y = estimate, x = term)) +
geom_errorbar(aes(ymin = ci.low, ymax = ci.upp, alpha = significance), width = .15, position = position_dodge(width = .4), lwd = .5) +
geom_point(aes(shape = significance, alpha = significance),
position = position_dodge(width = .4)) +
scale_alpha_manual(values = c(.5, 1)) +
scale_shape_manual(values = c(NA,8), labels = c("", "95% confidence interval\ndoes not cross zero")) +
geom_hline(yintercept = 0, size = .35, linetype = "dashed", color = 'darkgray') +
#ylim(-.5, 1.2) +
coord_flip() +
ylab("") + xlab("") +
guides(colour = guide_legend(title = ""),
alpha = "none",
shape = guide_legend(title = "",
override.aes = list(linetype = c(0,1),
shape = c(NA,8),
size = c(0,2)))) +
theme(text = element_text(family = "ebgaramond"),
plot.title = element_text(hjust = .5, vjust = 1, colour = "#3C3C3C", size = 10, face = "italic"),
axis.text.y = element_text(colour = "#3C3C3C", size = 10),
axis.text.x = element_text(colour = "#3C3C3C", size = 6),
legend.position="right",
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
strip.background = element_blank(),
legend.text = element_text(colour = "#3C3C3C", size = 10),
strip.text.x = element_text(size = 8, colour = "#3C3C3C"),
strip.text.y = element_text(size = 8, colour = "#3C3C3C"),
panel.spacing.x=unit(1, "lines"),
panel.spacing.y=unit(1, "lines"),
plot.caption = element_text(hjust = 0, colour = "#3C3C3C", margin = unit(c(0,0,0,0), "mm"), size = 8),
plot.margin = margin(0, 0, 0, 0, "cm"),
plot.background  = element_rect(fill = NA, colour = NA),
panel.background = element_rect(fill = NA, colour = NA),
axis.line = element_line(colour = "#3C3C3C", linewidth = 0.3),
legend.background = element_rect(fill = NA, colour = NA),
legend.key        = element_rect(fill = NA, colour = NA)) +
theme(aspect.ratio = 1) +
scale_x_discrete(limits = c('log(crime)', 'log(sqf)'),
breaks = c('log(crime)', 'log(sqf)'),
labels = c('Previous violent\ncrime (logged)', 'Stop & Frisk\n(logged)'))
ggsave("esc/presentation_files/plot_sqf.svg", plot = plot_trr, bg = "transparent")
plot_trr <-
ggplot(dataplot_spatial %>%
filter(model == "trr") %>%
filter(term %in% c("log(sqf)", "log(crime)"))
, aes(y = estimate, x = term)) +
geom_errorbar(aes(ymin = ci.low, ymax = ci.upp, alpha = significance), width = .15, position = position_dodge(width = .4), lwd = .5) +
geom_point(aes(shape = significance, alpha = significance),
position = position_dodge(width = .4)) +
scale_alpha_manual(values = c(1)) +
scale_shape_manual(values = c(8), labels = c("95% confidence interval\ndoes not cross zero")) +
geom_hline(yintercept = 0, size = .35, linetype = "dashed", color = 'darkgray') +
#ylim(-.5, 1.2) +
coord_flip() +
ylab("") + xlab("") +
guides(colour = guide_legend(title = ""),
alpha = "none",
shape = guide_legend(title = "",
override.aes = list(linetype = c(1),
shape = c(8),
size = c(2)))) +
theme(text = element_text(family = "ebgaramond"),
plot.title = element_text(hjust = .5, vjust = 1, colour = "#3C3C3C", size = 10, face = "italic"),
axis.text.y = element_text(colour = "#3C3C3C", size = 10),
axis.text.x = element_text(colour = "#3C3C3C", size = 6),
legend.position="right",
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
strip.background = element_blank(),
legend.text = element_text(colour = "#3C3C3C", size = 10),
strip.text.x = element_text(size = 8, colour = "#3C3C3C"),
strip.text.y = element_text(size = 8, colour = "#3C3C3C"),
panel.spacing.x=unit(1, "lines"),
panel.spacing.y=unit(1, "lines"),
plot.caption = element_text(hjust = 0, colour = "#3C3C3C", margin = unit(c(0,0,0,0), "mm"), size = 8),
plot.margin = margin(0, 0, 0, 0, "cm"),
plot.background  = element_rect(fill = NA, colour = NA),
panel.background = element_rect(fill = NA, colour = NA),
axis.line = element_line(colour = "#3C3C3C", linewidth = 0.3),
legend.background = element_rect(fill = NA, colour = NA),
legend.key        = element_rect(fill = NA, colour = NA)) +
theme(aspect.ratio = 1) +
scale_x_discrete(limits = c('log(crime)', 'log(sqf)'),
breaks = c('log(crime)', 'log(sqf)'),
labels = c('Previous violent\ncrime (logged)', 'Stop & Frisk\n(logged)'))
plot_trr
ggsave("esc/presentation_files/plot_sqf.svg", plot = plot_trr, bg = "transparent")
plot_sqf <-
ggplot(dataplot_spatial %>%
filter(model != "trr") %>%
filter(term %in% c("FAC_disadv", "log(crime)")) %>%
mutate(model_gr = case_when(model == "sqf 1" ~ "Model 1", model == "sqf 2" ~ "Model 2")) %>%
mutate(model_gr = factor(model_gr, levels = c("Model 2", "Model 1")))
, aes(y = estimate, x = term, group = model_gr, colour = model_gr)) +
geom_errorbar(aes(ymin = ci.low, ymax = ci.upp, group = model_gr, alpha = significance), width = .15, position = position_dodge(width = .4), lwd = .5) +
geom_point(aes(shape = significance, alpha = significance, group = model_gr),
position = position_dodge(width = .4)) +
scale_alpha_manual(values = c(.5, 1)) +
scale_shape_manual(values = c(NA,8), labels = c("", "95% confidence interval\ndoes not cross zero")) +
geom_hline(yintercept = 0, size = .35, linetype = "dashed", color = 'darkgray') +
ylim(-.5, 1.2) +
coord_flip() +
ylab("") + xlab("") +
guides(colour = guide_legend(title = ""),
alpha = "none",
shape = guide_legend(title = "",
override.aes = list(linetype = c(0,1),
shape = c(NA,8),
size = c(0,2)))) +
theme(text = element_text(family = "ebgaramond"),
plot.title = element_text(hjust = .5, vjust = 1, colour = "#3C3C3C", size = 10, face = "italic"),
axis.text.y = element_text(colour = "#3C3C3C", size = 10),
axis.text.x = element_text(colour = "#3C3C3C", size = 6),
legend.position="right",
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
strip.background = element_blank(),
legend.text = element_text(colour = "#3C3C3C", size = 10),
strip.text.x = element_text(size = 8, colour = "#3C3C3C"),
strip.text.y = element_text(size = 8, colour = "#3C3C3C"),
panel.spacing.x=unit(1, "lines"),
panel.spacing.y=unit(1, "lines"),
plot.caption = element_text(hjust = 0, colour = "#3C3C3C", margin = unit(c(0,0,0,0), "mm"), size = 8),
plot.margin = margin(0, 0, 0, 0, "cm"),
plot.background  = element_rect(fill = NA, colour = NA),
panel.background = element_rect(fill = NA, colour = NA),
axis.line = element_line(colour = "#3C3C3C", linewidth = 0.3),
legend.background = element_rect(fill = NA, colour = NA),
legend.key        = element_rect(fill = NA, colour = NA)) +
theme(aspect.ratio = 1) +
scale_x_discrete(limits = c('log(crime)', 'FAC_disadv'),
breaks = c('log(crime)', 'FAC_disadv'),
labels = c('Previous violent\ncrime (logged)', 'Concentrated\ndisadvantage')) +
scale_colour_brewer(palette = "Dark2",
breaks = c('Model 1', 'Model 2'))
ggsave("esc/presentation_files/plot_sqf.svg", plot = plot_sqf, bg = "transparent")
ggsave("esc/presentation_files/plot_trr.svg", plot = plot_trr, bg = "transparent")
plot_trr <-
ggplot(dataplot_spatial %>%
filter(model == "trr") %>%
filter(term %in% c("log(sqf)", "log(crime)"))
, aes(y = estimate, x = term)) +
geom_errorbar(aes(ymin = ci.low, ymax = ci.upp, alpha = significance), width = .15, position = position_dodge(width = .4), lwd = .5) +
geom_point(aes(shape = significance, alpha = significance),
position = position_dodge(width = .4)) +
scale_alpha_manual(values = c(1)) +
scale_shape_manual(values = c(8), labels = c("95% confidence interval\ndoes not cross zero")) +
geom_hline(yintercept = 0, size = .35, linetype = "dashed", color = 'darkgray') +
ylim(-.5, 2) +
coord_flip() +
ylab("") + xlab("") +
guides(colour = guide_legend(title = ""),
alpha = "none",
shape = guide_legend(title = "",
override.aes = list(linetype = c(1),
shape = c(8),
size = c(2)))) +
theme(text = element_text(family = "ebgaramond"),
plot.title = element_text(hjust = .5, vjust = 1, colour = "#3C3C3C", size = 10, face = "italic"),
axis.text.y = element_text(colour = "#3C3C3C", size = 10),
axis.text.x = element_text(colour = "#3C3C3C", size = 6),
legend.position="right",
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
strip.background = element_blank(),
legend.text = element_text(colour = "#3C3C3C", size = 10),
strip.text.x = element_text(size = 8, colour = "#3C3C3C"),
strip.text.y = element_text(size = 8, colour = "#3C3C3C"),
panel.spacing.x=unit(1, "lines"),
panel.spacing.y=unit(1, "lines"),
plot.caption = element_text(hjust = 0, colour = "#3C3C3C", margin = unit(c(0,0,0,0), "mm"), size = 8),
plot.margin = margin(0, 0, 0, 0, "cm"),
plot.background  = element_rect(fill = NA, colour = NA),
panel.background = element_rect(fill = NA, colour = NA),
axis.line = element_line(colour = "#3C3C3C", linewidth = 0.3),
legend.background = element_rect(fill = NA, colour = NA),
legend.key        = element_rect(fill = NA, colour = NA)) +
theme(aspect.ratio = 1) +
scale_x_discrete(limits = c('log(crime)', 'log(sqf)'),
breaks = c('log(crime)', 'log(sqf)'),
labels = c('Previous violent\ncrime (logged)', 'Stop & Frisk\n(logged)'))
ggsave("esc/presentation_files/plot_trr.svg", plot = plot_trr, bg = "transparent")
